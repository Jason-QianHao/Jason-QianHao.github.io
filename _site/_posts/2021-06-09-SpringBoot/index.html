<!DOCTYPE html>
<html>

<head>
  
  <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Springboot和常见框架整合 | 小小千千 GitHub blog</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Springboot和常见框架整合" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="目录 1 Springboot简介 2 Springboot整合依赖汇总 3 常见问题汇总" />
<meta property="og:description" content="目录 1 Springboot简介 2 Springboot整合依赖汇总 3 常见问题汇总" />
<link rel="canonical" href="http://localhost:4000/_posts/2021-06-09-SpringBoot/" />
<meta property="og:url" content="http://localhost:4000/_posts/2021-06-09-SpringBoot/" />
<meta property="og:site_name" content="小小千千 GitHub blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-06-09T00:00:00+08:00" />
<script type="application/ld+json">
{"headline":"Springboot和常见框架整合","dateModified":"2021-06-09T00:00:00+08:00","datePublished":"2021-06-09T00:00:00+08:00","url":"http://localhost:4000/_posts/2021-06-09-SpringBoot/","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/_posts/2021-06-09-SpringBoot/"},"description":"目录 1 Springboot简介 2 Springboot整合依赖汇总 3 常见问题汇总","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  
  
  <meta
  name="viewport"
  content="width=device-width, initial-scale=1.0, maximum-scale=1"
/>
<meta
  http-equiv="content-type"
  content="text/html; charset=utf-8"
/>
<link
  rel="alternate"
  href="/feed.xml"
  title="RSS"
  type="application/rss+xml"
/>

  
  <link
  rel="apple-touch-icon-precomposed"
  href="/assets/image/dilb.jpeg"
/>
<link
  rel="shortcut
  icon"
  href="/assets/image/dilb.jpeg"
/>

  
  <link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/combine/gh/poole/lanyon@v1.1.0/public/css/poole.min.css,gh/poole/lanyon@v1.1.0/public/css/lanyon.min.css"
/>

  
  <link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"
/>

  
  <link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/gh/Dreamer-Paul/Pio@2.4/static/pio.min.css"
/>
<script
  async="async"
  src="https://cdn.jsdelivr.net/combine/gh/Dreamer-Paul/Pio@2.4/static/l2d.min.js,gh/Dreamer-Paul/Pio@2.4/static/pio.min.js"
  onload='
      let pio_container = document.createElement("div");
      pio_container.classList.add("pio-container");
      pio_container.classList.add("right");
      pio_container.style.bottom = "-2rem";
      pio_container.style.zIndex = "1";
      document.body.insertAdjacentElement("beforeend", pio_container);
      let pio_action = document.createElement("div");
      pio_action.classList.add("pio-action");
      pio_container.insertAdjacentElement("beforeend", pio_action);
      let pio_canvas = document.createElement("canvas");
      pio_canvas.id = "pio";
      pio_canvas.style.width = "14rem";
      pio_canvas.width = "600";
      pio_canvas.height = "800";
      pio_container.insertAdjacentElement("beforeend", pio_canvas);
      let pio = new Paul_Pio({
        "mode": "fixed",
        "hidden": true,
        "night": "for(let i=7; i<16; ++i) if(document.body.classList.contains(`theme-base-0`+i.toString(16))) { document.body.classList.remove(`theme-base-0`+i.toString(16)); document.body.classList.add(`theme-base-0`+((i-6)%9+7).toString(16)); break; }",
        "content": {
          "link": ["https://jekyll-theme-WuK.wu-kan.cn"],
          "skin": ["要换成我的朋友吗？", "让她放个假吧~"],
          "hidden": true,
          "custom": [{
            "selector": "a",
            "type": "link",
          }, {
            "selector": ".sidebar-toggle",
            "text": "打开侧边栏叭~"
          }, {
            "selector": ".effect-info",
            "text": "哇，你发现了什么！"
          }, {
            "selector": "#sidebar-search-input",
            "text": "想搜索什么呢？很多干货哦！"
          }, {
            "selector": "#toc",
            "text": "这是目录~"
          }, {
            "selector": ".page-title",
            "text": "这是标题~"
          }, {
            "selector": ".v",
            "text": "评论没有审核，要对自己的发言负责哦~"
          }]
        },
        "model": [
          "https:\/\/cdn.jsdelivr.net/gh/imuncle/live2d/model/33/model.2018.bls-winter.json",
          "https:\/\/cdn.jsdelivr.net/gh/imuncle/live2d/model/platelet-2/model.json",
          "https:\/\/cdn.jsdelivr.net/gh/imuncle/live2d/model/xiaomai/xiaomai.model.json",
          "https:\/\/cdn.jsdelivr.net/gh/imuncle/live2d/model/mashiro/seifuku.model.json",
          "https:\/\/cdn.jsdelivr.net/gh/imuncle/live2d/model/Violet/14.json",
          "https:\/\/cdn.jsdelivr.net/gh/xiaoski/live2d_models_collection/Kobayaxi/Kobayaxi.model.json",
          "https:\/\/cdn.jsdelivr.net/gh/xiaoski/live2d_models_collection/mikoto/mikoto.model.json",
          "https:\/\/cdn.jsdelivr.net/gh/xiaoski/live2d_models_collection/uiharu/uiharu.model.json"]
      });'
></script>

  
  <script
  src='https://zz.bdstatic.com/linksubmit/push.js'
  async="async"
></script>

  
  <script
  async="async"
  src="https://www.googletagmanager.com/gtag/js?id=UA-163543967-1"
  onload="
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-163543967-1');"
></script>

  
  <style>
  .wrap {
    transition-property: width,background-size,transform;
    transition-duration: .3s;
    transition-timing-function: ease-in-out;
    min-height: 100%;
    display: inline-block;
    background-size: 100% auto;
    background-position: 0% 0%;
    background-repeat: no-repeat;
    background-attachment: fixed;
    background-image: url(/assets/image/dilb.jpeg);
  }
  @media (min-aspect-ratio: 2400/1850) {
    .wrap {
      background-image: url(/assets/image/dilb.jpeg);
    }
  }
  .sidebar-overlay #sidebar-checkbox:checked ~ .wrap {
    width: calc(100% - 14rem);
    background-size: calc(100% - 14rem) auto;
    transform: translateX(14rem);
  }
  .layout-reverse.sidebar-overlay #sidebar-checkbox:checked ~ .wrap {
    transform: translateX(0);
  }
</style>

  
  <style>
  .sidebar,
  html,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: PingFang SC, Menlo, Monaco, "Courier New", Microsoft JhengHei, monospace;
  }
</style>

  
  <style>
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-weight: bold;
  }
</style>

  
  <style>
  img {
    display: inline-block;
    margin: 0;
  }
</style>

  
  <style>
  ::-webkit-scrollbar {
    width: 3px;
    height: 3px;
  }
  ::-webkit-scrollbar-thumb {
    background-image: linear-gradient(45deg, Cyan 0%, Magenta 50%, Yellow 100%);
  }
</style>

  
  <style>
  ::selection {
    color: White;
    background: Black;
  }
</style>

  
</head>

<body
  class="theme-base-0d layout-reverse sidebar-overlay">
  
  
  
  <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
  <input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox"
     />
  <!-- Toggleable sidebar -->
  <div class="sidebar" id="sidebar">
    
    <div class="sidebar-item">
      <div class="effect effect-right_to_left">
        <img class="effect-img" src="/assets/image/dilb.jpeg" alt="img" />
        <div class="effect-info">
          一枚顽强的小天蝎程序员<br/>
张杰<br/>
林俊杰<br/>
<a href="https://github.com/Jason-QianHao">
  <i class="fab fa-github"></i>
</a>
<a href="https://www.jianshu.com/u/1d46c8671406">
  <i class="fas fa-smile"></i>
</a>
<iframe
  src="https://api.mlwei.com/music/play/?id=002qtwZJ32UUxO&type=song&height=32"
  width=100%
  height=52
  frameborder="no"
  border="0"
  marginwidth="0"
  marginheight="0"
></iframe>

        </div>
      </div>
    </div>
    
    <nav class="sidebar-nav">
      
      <a class="sidebar-nav-item" href="/">
        <i class="fas fa-home fa-fw"></i> 首页
      </a>
      
      <a class="sidebar-nav-item" href="/comments/">
        <i class="fas fa-comments fa-fw"></i> 留言
      </a>
      
      <a class="sidebar-nav-item" href="/tags/">
        <i class="fas fa-tags fa-fw"></i> 标签
      </a>
      
      <a class="sidebar-nav-item" href="/archive/">
        <i class="fas fa-archive fa-fw"></i> 归档
      </a>
      
    </nav>
    <div class="sidebar-item">
      
      <style>
  #sidebar-search-input {
    background: none;
    border: none;
    color: White;
    width: 100%;
  }
  #sidebar-search-results-container {
    overflow: auto auto;
    max-height: 50vh;
  }
</style>
<input
  id="sidebar-search-input"
  placeholder="搜索博文"
/>
<ol
  id="sidebar-search-results-container"
></ol>
<script
  src='https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.7/dest/simple-jekyll-search.min.js'
  async='async'
  onload='
    SimpleJekyllSearch({
      json: "/assets/simple-jekyll-search/search.json",
      searchInput: document.getElementById("sidebar-search-input"),
      resultsContainer: document.getElementById("sidebar-search-results-container"),
      searchResultTemplate: `<li><a href="{url}">{title}</a></li>`,
      limit: 999,
      fuzzy: true
    })'
></script>

      
      
      <style>
  #toc {
    overflow: auto auto;
    max-height: 50vh;
  }
</style>

      <ol id="toc">
  <li><a href="#1-springboot%E7%AE%80%E4%BB%8B">1 Springboot简介</a></li>
  <li><a href="#2-springboot%E6%95%B4%E5%90%88%E4%BE%9D%E8%B5%96%E6%B1%87%E6%80%BB">2 Springboot整合依赖汇总</a>
    <ol>
      <li><a href="#21-spring-web%E5%9F%BA%E7%A1%80">2.1 Spring Web基础</a>
        <ol>
          <li><a href="#211-web%E5%9F%BA%E7%A1%80%E4%BE%9D%E8%B5%96">2.1.1 Web基础依赖</a></li>
          <li><a href="#212-%E9%85%8D%E7%BD%AE%E5%92%8C%E5%90%AF%E5%8A%A8">2.1.2 配置和启动</a></li>
        </ol>
      </li>
      <li><a href="#22-%E9%A1%B5%E9%9D%A2%E6%B8%B2%E6%9F%93">2.2 页面渲染</a>
        <ol>
          <li><a href="#221-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE">2.2.1 静态资源访问</a></li>
          <li><a href="#222-freemarker%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E6%B8%B2%E6%9F%93web%E8%A7%86%E5%9B%BE">2.2.2 Freemarker模板引擎渲染web视图</a>
            <ol>
              <li><a href="#2221-%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E">2.2.2.1 模板引擎</a></li>
              <li><a href="#2222-freemarker">2.2.2.2 Freemarker</a></li>
            </ol>
          </li>
          <li><a href="#223-jsp">2.2.3 JSP</a>
            <ol>
              <li><a href="#2231-maven%E4%BE%9D%E8%B5%96">2.2.3.1 maven依赖</a></li>
              <li><a href="#2232-yml%E9%85%8D%E7%BD%AE">2.2.3.2 yml配置</a></li>
              <li><a href="#2233-%E5%90%AF%E5%8A%A8">2.2.3.3 启动</a></li>
            </ol>
          </li>
        </ol>
      </li>
      <li><a href="#23-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BF%E9%97%AE">2.3 数据库访问</a>
        <ol>
          <li><a href="#231-jdbctemplate">2.3.1 JdbcTemplate</a>
            <ol>
              <li><a href="#2311-maven%E4%BE%9D%E8%B5%96">2.3.1.1 maven依赖</a></li>
              <li><a href="#2312-yml%E9%85%8D%E7%BD%AE">2.3.1.2 yml配置</a></li>
              <li><a href="#2313-%E8%B0%83%E7%94%A8">2.3.1.3 调用</a></li>
            </ol>
          </li>
          <li><a href="#232-mybatis">2.3.2 Mybatis</a>
            <ol>
              <li><a href="#2321-maven%E4%BE%9D%E8%B5%96">2.3.2.1 maven依赖</a></li>
              <li><a href="#2322-yml%E9%85%8D%E7%BD%AE">2.3.2.2 yml配置</a></li>
              <li><a href="#2323-%E8%B0%83%E7%94%A8">2.3.2.3 调用</a></li>
            </ol>
          </li>
          <li><a href="#233-springjpa">2.3.3 Springjpa</a>
            <ol>
              <li><a href="#2331-maven%E4%BE%9D%E8%B5%96">2.3.3.1 maven依赖</a></li>
              <li><a href="#2332-yml%E9%85%8D%E7%BD%AE">2.3.3.2 yml配置</a></li>
              <li><a href="#2333-%E8%B0%83%E7%94%A8%E5%92%8C%E5%90%AF%E5%8A%A8">2.3.3.3 调用和启动</a></li>
            </ol>
          </li>
        </ol>
      </li>
      <li><a href="#24-configuration%E9%85%8D%E7%BD%AE">2.4 @Configuration配置</a>
        <ol>
          <li><a href="#241-configurationproperties">2.4.1 @ConfigurationProperties</a></li>
          <li><a href="#242-bean">2.4.2 @Bean</a>
            <ol>
              <li><a href="#2421-%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E">2.4.2.1 使用说明</a></li>
              <li><a href="#2422-bean-%E5%90%8D%E7%A7%B0">2.4.2.2 Bean 名称</a></li>
              <li><a href="#2423-bean-%E4%B8%8E%E5%85%B6%E4%BB%96%E6%B3%A8%E8%A7%A3%E4%B8%80%E8%B5%B7%E4%BD%BF%E7%94%A8">2.4.2.3 @Bean 与其他注解一起使用</a></li>
              <li><a href="#2424-bean-%E5%88%9D%E5%A7%8B%E5%8C%96%E5%92%8C%E9%94%80%E6%AF%81%E6%97%B6%E8%B0%83%E7%94%A8%E7%9B%B8%E5%BA%94%E7%9A%84%E6%96%B9%E6%B3%95">2.4.2.4 Bean 初始化和销毁时调用相应的方法</a></li>
            </ol>
          </li>
          <li><a href="#243-configuration">2.4.3 @Configuration</a>
            <ol>
              <li><a href="#2431-%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E">2.4.3.1 使用说明</a></li>
              <li><a href="#2432-demo">2.4.3.2 Demo</a></li>
            </ol>
          </li>
        </ol>
      </li>
      <li><a href="#25-%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86">2.5 事务管理</a>
        <ol>
          <li><a href="#251-transactional">2.5.1 @Transactional</a></li>
          <li><a href="#251-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86">2.5.1 分布式事务管理</a></li>
        </ol>
      </li>
      <li><a href="#26-lombok">2.6 Lombok</a>
        <ol>
          <li><a href="#261-maven%E4%BE%9D%E8%B5%96">2.6.1 maven依赖</a></li>
          <li><a href="#262-%E5%AE%89%E8%A3%85lombok%E6%8F%92%E4%BB%B6">2.6.2 安装lomBok插件</a></li>
        </ol>
      </li>
    </ol>
  </li>
</ol>
      
      
      <style>
  .sidebar-checkbox {
    display: none;
  }
  .sidebar-toggle {
    position: fixed;
  }
</style>

      
      <style>
  .effect {
    margin: 1rem;
    perspective: 900px;
  }
  .effect-info {
    text-align: center;
    backface-visibility: hidden;
    position: absolute;
    top: 0;
    transform-style: preserve-3d;
  }
  .effect-img {
    z-index: 11;
    width: 100%;
    height: 100%;
    position: relative;
    transition: all 0.5s ease-in-out;
  }
  .effect-img:before {
    position: absolute;
    display: block;
  }
  .effect-right_to_left .effect-img {
    transform-origin: 0% 50%;
  }
  .effect-right_to_left:hover .effect-img {
    transform: rotate3d(0, 1, 0, -180deg);
  }
</style>

      
      <div>
  <i class="fas fa-cog fa-spin fa-fw"></i>
  <span id="run_time_day">
    <i class="fas fa-spinner fa-pulse"></i>
  </span>天
  <span id="run_time_hour">
    <i class="fas fa-spinner fa-pulse"></i>
  </span>时
  <span id="run_time_minute">
    <i class="fas fa-spinner fa-pulse"></i>
  </span>分
  <span id="run_time_second">
    <i class="fas fa-spinner fa-pulse"></i>
  </span>秒
  <script>
    setInterval(function (d,h,m,s,b) {
      function setzero(i) {
        return i < 10 ? "0" + i : i;
      }
      let BirthDay = new Date(b);
      let today = new Date();
      let timeold = (today.getTime() - BirthDay.getTime());
      let sectimeold = timeold / 1000;
      let secondsold = Math.floor(sectimeold);
      let msPerDay = 24 * 60 * 60 * 1000;
      let e_daysold = timeold / msPerDay;
      let daysold = Math.floor(e_daysold);
      let e_hrsold = (e_daysold - daysold) * 24;
      let hrsold = Math.floor(e_hrsold);
      let e_minsold = (e_hrsold - hrsold) * 60;
      let minsold = Math.floor((e_hrsold - hrsold) * 60);
      let seconds = Math.floor((e_minsold - minsold) * 60);
      d.textContent = daysold;
      h.textContent = setzero(hrsold);
      m.textContent = setzero(minsold);
      s.textContent = setzero(seconds);
    },
    1000,
    document.getElementById("run_time_day"),
    document.getElementById("run_time_hour"),
    document.getElementById("run_time_minute"),
    document.getElementById("run_time_second"),
    "06/10/2021 18:00:00")// 这是我第一篇CSDN博客的时间
  </script>
</div>

      
      <div>
  <div>
    <i class="fas fa-eye fa-fw"></i>
    <span id="busuanzi_value_page_pv">
      <i class="fas fa-spinner fa-pulse"></i>
    </span>次
  </div>
  <div>
    <i class="fas fa-paw fa-fw"></i>
    <span id="busuanzi_value_site_pv">
      <i class="fas fa-spinner fa-pulse"></i>
    </span>枚
  </div>
  <div>
    <i class="fas fa-user-friends fa-fw"></i>
    <span id="busuanzi_value_site_uv">
      <i class="fas fa-spinner fa-pulse"></i>
    </span>人
  </div>
  <script
    src='https://cdn.jsdelivr.net/npm/busuanzi@2.3.0'
    async='async'
  ></script>
</div>

      
      <div>
  <i class="fas fa-thumbs-up fa-fw"></i>
  <a href="https://jekyll-theme-WuK.wu-kan.cn">
    jekyll-theme-WuK
  </a>
</div>

      
      <div>
  <i class="fas fa-copyright fa-fw"></i>
  @2021 Jason
</div>

      
      
    </div>
  </div>
  <!-- Wrap is the content to shift when toggling the sidebar. We wrap the content to avoid any CSS collisions with our real content. -->
  
  <div class="wrap">
    
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"
/>
<script
  src="https://cdn.jsdelivr.net/combine/npm/katex@0.11.1/dist/katex.min.js,npm/katex@0.11.1/dist/contrib/mathtex-script-type.min.js,npm/katex@0.11.1/dist/contrib/auto-render.min.js"
  defer="defer"
  onload='renderMathInElement(document.body, { delimiters: [{ left: "$", right: "$", display: false }] })'
></script>



<style>
  pre.language-mermaid,
  code.language-mermaid {
    display: none;
  }
</style>
<script
  src="https://cdn.jsdelivr.net/npm/mermaid@8.5.1/dist/mermaid.min.js"
  defer="defer"
  onload='
    for(let x of document.getElementsByClassName("language-mermaid"))
      if(x.nodeName=="CODE")
      {
        let m = document.createElement("div");
        m.classList.add("mermaid");
        m.textContent = x.textContent;
        x.parentNode.insertAdjacentElement("beforebegin", m);
      }'
></script>



<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/combine/npm/prismjs@1.20.0/plugins/line-numbers/prism-line-numbers.min.css,npm/prismjs@1.20.0/plugins/toolbar/prism-toolbar.min.css,gh/PrismJS/prism-themes@1955cfef6953b3a59e66016e8a1e016b45d6cc79/themes/prism-nord.min.css"
/>
<script
  src="https://cdn.jsdelivr.net/combine/npm/prismjs@1.20.0/components/prism-core.min.js,npm/prismjs@1.20.0/plugins/autoloader/prism-autoloader.min.js,npm/prismjs@1.20.0/plugins/line-numbers/prism-line-numbers.min.js,npm/prismjs@1.20.0/plugins/toolbar/prism-toolbar.min.js"
  defer="defer"
  onload='
    Prism.plugins.autoloader.languages_path = "https:\/\/cdn.jsdelivr.net/npm/prismjs/components/";
    for(let x of document.getElementsByTagName("pre"))
      x.classList.add("line-numbers");
    Prism.plugins.toolbar.registerButton("select-code", function (env) {
      let button = document.createElement("button");
      button.textContent = "select this " + env.language;
      button.addEventListener("click", function () {
        if (document.body.createTextRange) {
          let range = document.body.createTextRange();
          range.moveToElementText(env.element);
          range.select();
        } else if (window.getSelection) {
          let selection = window.getSelection();
          let range = document.createRange();
          range.selectNodeContents(env.element);
          selection.removeAllRanges();
            selection.addRange(range);
        }
      });
      return button;
    })'
></script>



<style>
  pre {
    max-height: 50vh;
    overflow: auto;
  }
</style>


<style>
  @media (min-width: 56em) {
    .container {
      max-width: 66.6%;
    }
  }
</style>


<style>
  .masthead,
  .container.content {
    padding-top: 1rem;
    padding-bottom: 1rem;
    box-shadow: 0 0 .75rem rgba(0, 0, 0, 0.1);
    background-color: rgba(255, 255, 255, 0.95);
    animation-duration: 2s;
    animation-name: fadeIn;
  }
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
</style>



<div class="masthead">
  <h3 class="container masthead-title">
    
    Springboot和常见框架整合
    <a href="/" title="Home">
      <small>
        小小千千 | GitHub blog
      </small>
    </a>
    
  </h3>
</div>

<div class="container content">
  <div class="post">
  <span class="post-date">
    
    <i class="fas fa-calendar-day fa-fw"></i>
    09 Jun 2021
    
    
    <i class="fas fa-file-word fa-fw"></i>
    18986字
    
    
    <i class="fas fa-clock fa-fw"></i>
    64分
    
    
    <span class="leancloud-visitors" id="/_posts/2021-06-09-SpringBoot/" data-xid="/_posts/2021-06-09-SpringBoot/" data-flag-title="Springboot和常见框架整合">
      <i class="fas fa-book-reader fa-fw"></i>
      <span class="leancloud-visitors-count">
        <i class="fas fa-spinner fa-pulse"></i>
      </span>次
    </span>
    
    
    
    <i class="fas fa-tag fa-fw"></i>
    Spring
    
    
    <br/>
<i class="fas fa-coffee fa-fw"></i>
<a href="/merger/">如果这篇博客帮助到你，可以请我喝一杯咖啡~</a>
<br/>
<i class="fab fa-creative-commons-by fa-fw"></i>
<a
  href="https://creativecommons.org/licenses/by/4.0/deed.zh"
  rel="license">
  CC BY 4.0
</a>
（除特别声明或转载文章外）

    
  </span>
  <blockquote>
  <p>目录
 1 Springboot简介<br />
 2 Springboot整合依赖汇总<br />
 3 常见问题汇总</p>
</blockquote>

<h1 id="1-springboot简介">1 Springboot简介</h1>
<p>Spring Boot让我们的Spring应用变的更轻量化。比如：你可以仅仅依靠一个Java类来运行一个Spring引用。你也可以打包你的应用为jar并通过使用java -jar来运行你的Spring Web应用。</p>

<p>Spring Boot的主要优点：</p>
<ul>
  <li>为所有Spring开发者更快的入门</li>
  <li>开箱即用，提供各种默认配置来简化项目配置</li>
  <li>内嵌式容器简化Web项目</li>
  <li>没有冗余代码生成和XML配置的要求</li>
</ul>

<h1 id="2-springboot整合依赖汇总">2 Springboot整合依赖汇总</h1>

<h2 id="21-spring-web基础">2.1 Spring Web基础</h2>

<h3 id="211-web基础依赖">2.1.1 Web基础依赖</h3>
<pre><code>&lt;parent&gt;
     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
     &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
     &lt;version&gt;1.5.2.RELEASE&lt;/version&gt;
     &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;
 &lt;/parent&gt;
&lt;dependencies&gt;
   &lt;!-- 集成web --&gt;
   &lt;dependency&gt;
       &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
       &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
   &lt;/dependency&gt;
&lt;/dependencies&gt;
 &lt;build&gt;
     &lt;plugins&gt;
         &lt;plugin&gt;
             &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
             &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
         &lt;/plugin&gt;
         &lt;plugin&gt;
             &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
             &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
             &lt;version&gt;2.4.2&lt;/version&gt;
             &lt;configuration&gt;
                 &lt;skipTests&gt;true&lt;/skipTests&gt;
             &lt;/configuration&gt;
         &lt;/plugin&gt;
         &lt;plugin&gt;
             &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
             &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;
             &lt;version&gt;3.0.0&lt;/version&gt;
             &lt;configuration&gt;
                 &lt;skipTests&gt;true&lt;/skipTests&gt;
             &lt;/configuration&gt;
         &lt;/plugin&gt;
     &lt;/plugins&gt; 
&lt;/build&gt;
</code></pre>
<p><strong>spring-boot-starter-web会自动引入spring-webmvc，spring-boot-starter-validation，spring-boot-starter，spring-boot-starter-json，spring-boot-starter-tomcat 这5个基础依赖</strong></p>

<h3 id="212-配置和启动">2.1.2 配置和启动</h3>

<p>（1）spring-boot-starter-web添加了Tomcat和Spring MVC
（2）Springboot的几种启动方式：</p>
<ul>
  <li>@EnableAutoConfiguration，auto-configuration将假定你正在开发一个web应用并相应地对Spring进行设置。
    <pre><code>@RestController
@EnableAutoConfiguration
public class HelloController {
   @RequestMapping("/hello")
   public String index() {
        return "Hello World";
   }
   public static void main(String[] args) {
       SpringApplication.run(HelloController.class, args);
   }
 }
</code></pre>
    <p><code>@ComponentScan(basePackages = "com.itmayiedu.controller") 控制器扫包</code></p>
    <pre><code> @ComponentScan(basePackages = "com.itmayiedu.controller")
 @EnableAutoConfiguration
 public class App {
   public static void main(String[] args) {
        SpringApplication.run(App.class, args);
   }
 }
</code></pre>
  </li>
  <li><strong>（推荐) @SpringBootApplication注解</strong>
可以简化部分配置，但mybatis的mapper扫包和springcloud的eureka启动等不能少。
    <pre><code>@SpringBootApplication
@EnableEurekaClient
@MapperScan(basePackages="com.qian.mapper")
public class MemberApp {
   public static void main(String[] args) {
      SpringApplication.run(MemberApp.class, args);
   }
 }
</code></pre>
    <p>（3）yml配置文件</p>
    <pre><code>server:
 port: 8080
 context-path: /project
</code></pre>
    <h2 id="22-页面渲染">2.2 页面渲染</h2>
  </li>
</ul>

<h3 id="221-静态资源访问">2.2.1 静态资源访问</h3>
<p>在我们开发Web应用的时候，需要引用大量的js、css、图片等静态资源。
Spring Boot默认提供静态资源目录位置需置于classpath下，目录名需符合如下规则：</p>
<ul>
  <li>/static</li>
  <li>/public</li>
  <li>/resources</li>
  <li>/META-INF/resources
    <blockquote>
      <p>举例：我们可以在src/main/resources/目录下创建static文件夹，在该位置放置一个图片文件。启动程序后，尝试访问http://localhost:8080/D.jpg。如能显示图片，配置成功。</p>
    </blockquote>
  </li>
</ul>

<h3 id="222-freemarker模板引擎渲染web视图">2.2.2 Freemarker模板引擎渲染web视图</h3>

<h4 id="2221-模板引擎">2.2.2.1 模板引擎</h4>
<p>模板的诞生是为了将显示与数据分离，模板技术多种多样，但其本质是将模板文件和数据通过模板引擎生成最终的HTML代码。使用户界面与业务数据（内容）分离而产生的，它可以生成特定格式的文档，用于网站的模板引擎就会生成一个标准的HTML文档在原有的HTML页面中来填充数据。最终达到渲染页面的目的。</p>

<p><img src="https://upload-images.jianshu.io/upload_images/24777208-942b91f3d5455c2e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image" /></p>

<p>模板技术并不是什么神秘技术，干的是拼接字符串的体力活。模板引擎就是利用正则表达式识别模板标识，并利用数据替换其中的标识符。比如：Hello, &lt;%= name%&gt;</p>

<p><img src="https://upload-images.jianshu.io/upload_images/24777208-81637e7a9aaa566a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image" /></p>

<p>数据是{name: ‘木的树’}，那么通过模板引擎解析后，我们希望得到Hello, 木的树。模板的前半部分是普通字符串，后半部分是模板标识，我们需要将其中的标识符替换为表达式。</p>

<h4 id="2222-freemarker">2.2.2.2 Freemarker</h4>

<p>（1）maven依赖</p>

<p><strong>使用jar工程即可！</strong></p>
<pre><code>&lt;dependency&gt;
     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
     &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>（2）yml配置</p>
<pre><code>spring:
   freemarker:
       allow-request-override : false
       cache : true
       check-template-location : true
       charset : UTF-8
       content-type : text/html
       expose-request-attributes : false
       expose-session-attributes : false
       expose-spring-macro-helpers : false
       suffix : .ftl
       template-loader-path : classpath:/templates/
</code></pre>
<p><strong>其实上述suffix可以该为.html即可支持html格式文件，测试有效！</strong></p>

<p>（3）启动</p>
<pre><code>@RequestMapping("/index")
public String index(Map&lt;String, Object&gt; map) {
     map.put("name","美丽的天使...");
     return "index";
 }
</code></pre>
<p>Map或者modelMap和request转发是一样的</p>

<h3 id="223-jsp">2.2.3 JSP</h3>

<h4 id="2231-maven依赖">2.2.3.1 maven依赖</h4>
<pre><code>&lt;dependency&gt;
     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
     &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;
 &lt;/dependency&gt;
 &lt;dependency&gt;
     &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;
     &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;
 &lt;/dependency&gt;
</code></pre>
<p><strong>maven中使用war类型工程,这点区别于freemarker！</strong></p>

<h4 id="2232-yml配置">2.2.3.2 yml配置</h4>
<pre><code>spring: 
     mvc: 
         view: 
             prefix: /WEB-INF/jsp/
             suffix: .jsp
</code></pre>
<h4 id="2233-启动">2.2.3.3 启动</h4>
<pre><code> @Controller 
 public class IndexController {
     @RequestMapping("/index")
     public String index() {
         return "index";
     }
 }
</code></pre>
<h2 id="23-数据库访问">2.3 数据库访问</h2>

<h3 id="231-jdbctemplate">2.3.1 JdbcTemplate</h3>

<h4 id="2311-maven依赖">2.3.1.1 maven依赖</h4>
<pre><code>&lt;dependency&gt;
     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
     &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;
 &lt;/dependency&gt;
 &lt;dependency&gt;
     &lt;groupId&gt;mysql&lt;/groupId&gt;
     &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
     &lt;version&gt;5.1.21&lt;/version&gt;
 &lt;/dependency&gt;
</code></pre>
<h4 id="2312-yml配置">2.3.1.2 yml配置</h4>
<pre><code>spring:
   datasource :
       url : jdbc:mysql://localhost:3306/test
       username : root
       password : root
       driver-class-name : com.mysql.jdbc.Driver
</code></pre>
<h4 id="2313-调用">2.3.1.3 调用</h4>
<pre><code>@Service
public class UserServiceImpl implements UserService {
     @Autowired
     private JdbcTemplate jdbcTemplate;
     public void createUser(String name, Integer age) {
         System.*out*.println("ssss");
         jdbcTemplate.update("insert into users values(null,?,?);", name, age);
     }
 }
</code></pre>
<h3 id="232-mybatis">2.3.2 Mybatis</h3>
<h4 id="2321-maven依赖">2.3.2.1 maven依赖</h4>
<pre><code>&lt;dependency&gt;
     &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
     &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
     &lt;version&gt;1.1.1&lt;/version&gt;
 &lt;/dependency&gt;
 &lt;dependency&gt;
     &lt;groupId&gt;mysql&lt;/groupId&gt;
     &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
     &lt;version&gt;5.1.46&lt;/version&gt;
 &lt;/dependency&gt;
</code></pre>
<h4 id="2322-yml配置">2.3.2.2 yml配置</h4>
<pre><code>spring:
   datasource :
       url : jdbc:mysql://localhost:3306/test
       username : root
       password : root
       driver-class-name : com.mysql.jdbc.Driver
</code></pre>
<h4 id="2323-调用">2.3.2.3 调用</h4>
<p>（1）定义mapper接口</p>
<pre><code>public interface UserMapper {
     @Select("SELECT * FROM USERS WHERE NAME = #{name}")
     User findByName(@Param("name") String name);
     @Insert("INSERT INTO USERS(NAME, AGE) VALUES(#{name}, #{age})")
     int insert(@Param("name") String name, @Param("age") Integer age);
}
</code></pre>
<p>（2）@MapperScan(basePackages = “com.mapper”)扫包</p>
<pre><code>@ComponentScan(basePackages = "com.qian")
@MapperScan(basePackages = "com.qian.mapper")
@SpringBootApplication
public class App {
     public static void main(String[] args) {
     SpringApplication.*run*(App.class, args);
    }
 }
</code></pre>
<h3 id="233-springjpa">2.3.3 Springjpa</h3>
<h4 id="2331-maven依赖">2.3.3.1 maven依赖</h4>
<pre><code>&lt;dependency&gt;
     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
     &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
     &lt;groupId&gt;mysql&lt;/groupId&gt;
     &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
     &lt;version&gt;5.1.21&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h4 id="2332-yml配置">2.3.3.2 yml配置</h4>
<pre><code>spring:
   datasource :
       url : jdbc:mysql://localhost:3306/test
       username : root
       password : root
       driver-class-name : com.mysql.jdbc.Driver
</code></pre>
<h4 id="2333-调用和启动">2.3.3.3 调用和启动</h4>

<p>（1）创建实体类</p>
<pre><code>@Entity(name = "users")
public class User {
     @Id
     @GeneratedValue
     private Integer id;
     @Column
     private String name;
     @Column
     private Integer age;
       // ..get/set方法
}
</code></pre>
<p>（2）创建Dao接口</p>
<pre><code>public interface UserDao extends JpaRepository&lt;User, Integer&gt; {
}
</code></pre>
<p>（3）@EnableJpaRepositories(basePackages = “com.qian.dao”)启动</p>
<pre><code>@ComponentScan(basePackages = { "com.qian" })
@EnableJpaRepositories(basePackages = "com.qian.dao")
@EnableAutoConfiguration
@EntityScan(basePackages = "com.itmayiedu.entity")
public class App {
     public static void main(String[] args) {
         SpringApplication.*run*(App.class, args);
    }
}
</code></pre>
<h2 id="24-configuration配置">2.4 @Configuration配置</h2>

<h3 id="241-configurationproperties">2.4.1 @ConfigurationProperties</h3>
<p>如果我们需要取 N 个配置项，通过 @Value（“${name}”） 的方式去配置项需要一个一个去取，这就显得有点 low 了。我们可以使用 @ConfigurationProperties 。标有 @ConfigurationProperties 的类的<strong>所有属性和配置文件中相关的配置项进行绑定</strong>。（默认从全局配置文件中获取配置值），绑定之后我们就可以通过这个类去访问全局配置文件中的属性值了。</p>

<p>（1） 在主配置文件中添加如下配置</p>
<pre><code>person: 
     name: kundy
     age: 13
     sex: male
</code></pre>
<p>（2）创建配置类，由于篇幅问题这里省略了 setter、getter 方法，但是实际开发中这个是必须的，否则无法成功注入。另外，@Component 这个注解也还是需要添加的。</p>
<pre><code>@Component
@ConfigurationProperties(prefix="person")
public class Person{
     private String name;
     private Integer age;
     private String sex;
}
</code></pre>
<p>这里 @ConfigurationProperties 有一个 prefix 参数，主要是用来指定该配置项在配置文件中的前缀。</p>

<h3 id="242-bean">2.4.2 @Bean</h3>

<h4 id="2421-使用说明">2.4.2.1 使用说明</h4>

<p>（1）@Bean注解相当于spring的xml配置文件<bean>标签，告诉容器注入一个bean。</bean></p>

<p>（2）@Bean 注解作用在方法上</p>

<p>（3）@Bean 指示一个方法返回一个 Spring 容器管理的 Bean</p>

<p>（4）@Bean 方法名与返回类名一致，首字母小写</p>

<p>（5）@Bean 一般和 @Component 或者 @Configuration 一起使用</p>

<p>（6）@Bean 注解默认作用域为单例 singleton 作用域，可通过 @Scope(“prototype”) 设置为原型作用域</p>

<h4 id="2422-bean-名称">2.4.2.2 Bean 名称</h4>

<p>（1）默认情况下 Bean 名称就是方法名，比如下面 Bean 名称便是 myBean：</p>
<pre><code>@Bean
public MyBean myBean() {
     return new MyBean();
}
</code></pre>
<p>（2）@Bean 注解支持设置别名。比如下面除了主名称 myBean 外，还有个别名 myBean1（两个都可以使用）</p>
<pre><code>@Bean("myBean1")
public MyBean myBean() {
     return new MyBean();
}
</code></pre>
<p>（3）@Bean 注解可以接受一个 String 数组设置多个别名。比如下面除了主名称 myBean 外，还有别名 myBean1、myBean2（三个都可以使用）</p>
<pre><code>@Bean({"myBean1", "myBean2"})
public MyBean myBean() {
     return new MyBean();
}
</code></pre>
<h4 id="2423-bean-与其他注解一起使用">2.4.2.3 @Bean 与其他注解一起使用</h4>

<p>（1）@Bean 注解常常与 @Scope、@Lazy，@DependsOn 和 @link Primary 注解一起使用：</p>

<p>@Profile 注解：为在不同环境下使用不同的配置提供了支持，如开发环境和生产环境的数据库配置是不同的</p>

<p>@Scope 注解：将 Bean 的作用域从单例改变为指定的作用域</p>

<p>@Lazy 注解：只有在默认单例作用域的情况下才有实际效果</p>

<p>@DependsOn 注解：表示在当前 Bean 创建之前需要先创建特定的其他 Bean</p>

<p>（2）比如下面样例，Bean 的作用域默认是单例的，我们配合 @Scope 注解将其改成 prototype 原型模式（每次获取 Bean 的时候会有一个新的实例）</p>
<pre><code>@Bean()
@Scope("prototype")
public MyBean myBean() {
     return new MyBean();
}
</code></pre>
<h4 id="2424-bean-初始化和销毁时调用相应的方法">2.4.2.4 Bean 初始化和销毁时调用相应的方法</h4>

<p>（1）实际开发中，经常会遇到在 Bean 使用之前或使用之后做些必要的操作，Spring 对 Bean 的生命周期的操作提供了支持：我们可以通过 @Bean 注解的 initMethod 和 destrodMethod 进行指定 Bean 在初始化和销毁时需要调用相应的方法。</p>

<p>（2）下面是一个简单的样例：</p>
<pre><code>public class MyBean {
     public void init() {
        System.out.println("MyBean开始初始化...");
     }
     public void destroy() {
         System.out.println("MyBean销毁...");
     }
     public String get() {
         return "MyBean使用...";
     }
}
&gt; 
&gt; @Bean(initMethod="init", destroyMethod="destroy")
&gt; 
&gt; public MyBean myBean() {
&gt; 
&gt;     return new MyBean();
&gt; 
&gt; }
</code></pre>
<h3 id="243-configuration">2.4.3 <strong>@Configuration</strong></h3>

<h4 id="2431-使用说明"><strong>2.4.3.1 使用说明</strong></h4>

<p>（1）@Configuration注解底层是含有@Component ，所以@Configuration 具有和 @Component 的作用。</p>

<p>（2）@Configuration注解相当于spring的xml配置文件中<beans>标签，里面可以配置bean。</beans></p>

<h4 id="2432-demo">2.4.3.2 Demo</h4>
<pre><code>import org.springframework.context.annotation.Bean;
 import org.springframework.context.annotation.Configuration;
@Configuration
public class MyConfigration {
     @Bean
     public String **hello()** {
         return "welcome to hangge.com";
     }
}
</code></pre>
<pre><code>import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;
@RestController
public class HelloController {
    @Autowired
    String hello;

    @GetMapping("/test")
     public String test() {
         return hello;
     }
}
</code></pre>
<h2 id="25-事务管理">2.5 事务管理</h2>

<h3 id="251-transactional">2.5.1 @Transactional</h3>
<p>springboot默认集成事物,只主要在方法上加上@Transactional即可。</p>

<h3 id="251-分布式事务管理">2.5.1 分布式事务管理</h3>
<p>使用springboot+jta+atomikos 分布式事物管理。</p>

<p><strong>maven依赖：</strong></p>
<pre><code>&lt;dependency&gt;
     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
     &lt;artifactId&gt;spring-boot-starter-jta-atomikos&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<h2 id="26-lombok">2.6 Lombok</h2>

<h3 id="261-maven依赖">2.6.1 maven依赖</h3>
<pre><code>&lt;!--Lombok --&gt;
&lt;dependency&gt;
     &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
     &lt;artifactId&gt;lombok&lt;/artifactId&gt;
     &lt;version&gt;1.18.6&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
     &lt;groupId&gt;net.logstash.logback&lt;/groupId&gt;
     &lt;artifactId&gt;logstash-logback-encoder&lt;/artifactId&gt;
     &lt;version&gt;4.9&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h3 id="262-安装lombok插件">2.6.2 <strong>安装lomBok插件</strong></h3>

<p>（1）下载lombok.jar包<a href="https://projectlombok.org/download.html">https://projectlombok.org/download.html</a></p>

<p>（2）运行Lombok.jar: java -jar D:\software\lombok.jar。D:\software\lombok.jar这是windows下lombok.jar所在的位置。数秒后将弹出一框，以确认eclipse的安装路径。</p>

<p>（3）确认完eclipse的安装路径后，点击install/update按钮，即可安装完成</p>

<p>（4）安装完成之后，请确认eclipse安装路径下是否多了一个lombok.jar包，并且其配置文件eclipse.ini中是否 添加了如下内容:</p>
<pre><code>-javaagent:lombok.jar
-Xbootclasspath/a:lombok.jar
</code></pre>
<p>那么恭喜你已经安装成功，否则将缺少的部分添加到相应的位置即可，重启eclipse或myeclipse。
##2.7 其他
###2.7.1 使用@Scheduled创建定时任务</p>
<ul>
  <li>在Spring Boot的主类中加入@EnableScheduling注解，启用定时任务的配置。</li>
  <li>设置时间方式：
    <ol>
      <li>固定时间频率运行方法。@Scheduled(fixedRate=30000)</li>
      <li>延迟指定的时间运行方法。@Scheduled(fixedDelay=30000)</li>
      <li>按照 cron 表达式定义的时间方式运行方法。@Scheduled(cron=”0 0 * * * *”)
        <pre><code>@Component
public class ScheduledTasks {
  private static final SimpleDateFormat dateFormat = new SimpleDateFormat("HH:mm:ss");
  @Scheduled(fixedDelay = 5000)
  public void reportCurrentTime() {
   System.out.println("现在时间：" + dateFormat.format(new Date()));
  }
}
</code></pre>
        <p>###2.7.2 @Async实现异步调用
启动加上@EnableAsync，需要执行异步方法上加入 @Async</p>
      </li>
    </ol>
  </li>
</ul>

<p>###2.7.3 发布打包
（1）使用mvn package 打包</p>

<p>（2）使用 “java –jar 包名” 运行应用</p>

<ul>
  <li>注意事项
如果报错没有主清单,在pom文件中新增
```</li>
</ul>
<build>
     <plugins>
         <plugin>
             <groupId>org.apache.maven.plugins</groupId>
             <artifactId>maven-compiler-plugin</artifactId>
             <configuration>
                 <source />1.8&lt;/source&gt;
                 <target>1.8</target>
             </configuration>
         </plugin>
         <plugin>
                 <groupId>org.springframework.boot</groupId>
                 <artifactId>spring-boot-maven-plugin</artifactId>
                 <configuration>
                     <maimClass>com.qian.app.App</maimClass>
                 </configuration>
                 <executions>
                     <execution>
                         <goals>
                             <goal>repackage</goal>
                         </goals>
                     </execution>
                 </executions> 
         </plugin>
     </plugins>
</build>
<pre><code>###2.7.4 说明
关于ActiveMQ、Redis、Zookeeper、Dubbo、Spring Cloud 的相关依赖，在其各自专题介绍。

#3 常见问题汇总
##3.1 Spring中访问静态资源
注意这里不是Springboot环境，仅仅为Spring环境。在SpringMVC3.0之后推荐使用下列配置，该配置的作用是：DispatcherServlet不会拦截以/static开头的所有请求路径，并当作静态资源交由Servlet处理。
</code></pre>
<mvc:annotation-driven />

<mvc:resources location="/img/" mapping="/img/**" />

<mvc:resources location="/js/" mapping="/js/**" />

<mvc:resources location="/css/" mapping="/css/**" />

<pre><code>- 说明：
location元素表示webapp目录下的static包下的所有文件；
mapping元素表示以/static开头的所有请求路径，如/static/a 或者/static/a/b；

##3.2 Spring MVC Controller接收前端参数的几种方式
(1) 普通方式-请求参数名和Controller方法的参数一致
</code></pre>
<p>/**</p>
<ul>
  <li>请求参数名和Controller方法的参数一致</li>
  <li>produces 设置返回参数的编码格式可以设置返回数据的类型以及编码，可以是json或者xml</li>
  <li>{</li>
  <li>@RequestMapping(value=”/xxx”,produces = {“application/json;charset=UTF-8”})</li>
  <li>或</li>
  <li>@RequestMapping(value=”/xxx”,produces = {“application/xml;charset=UTF-8”})</li>
  <li>或</li>
  <li>@RequestMapping(value=”/xxx”,produces = “{text/html;charset=utf-8}”)</li>
  <li>}</li>
  <li>@param name 用户名</li>
  <li>@param pwd 密码</li>
  <li>@return
 *
*/
@RequestMapping(value = “/add”, method = RequestMethod.GET, produces = {“application/json;charset=UTF-8”})
@ResponseBody
public String addUser(String name, String pwd){
 return”name:” + name + “,pwd:” + pwd;
 }
```
<code>http://localhost:8080/sty/param/add.action?name=张三&amp;pwd=123456</code></li>
</ul>

<p>(2) 对象方式-请求参数名和Controller方法中的对象的参数一致</p>
<pre><code>@Controller
@RequestMapping("/param")publicclass TestParamController {
    privatestaticfinalLogger logger = LoggerFactory.getLogger(TestParamController.class);
    /**    * 请求参数名和Controller方法的参数一致
    * produces 设置返回参数的编码格式可以设置返回数据的类型以及编码，可以是json或者xml
    * }
    * @param user 用户信息
    * @return    *
    */    @RequestMapping(value = "/addByObject", method = RequestMethod.GET, produces = {"application/json;charset=UTF-8"})
    @ResponseBody
    public String addUserByObject(User user){
        logger.debug("name:" + user.getName() + ",pwd:" + user.getPwd());
        return"name:" + user.getName() + ",pwd:" + user.getPwd();
    }
} 
</code></pre>
<p><code>http://localhost:8080/sty/param/addByObject.action?name=张三&amp;pwd=123456 </code></p>

<p>（3）自定义方法参数名-当请求参数名与方法参数名不一致时
可以在参数中增加@RequestParam注解。如果在方法中的参数增加了该注解，说明请求的url该带有该参数，否则不能执行该方法。如果在方法中的参数没有增加该注解，说明请求的url无需带有该参数，也能继续执行该方法。</p>
<pre><code>　　@RequestParam(defaultValue="0")可设置默认值(仅当传入参数为空时)。

　　@RequestParam(value="id")可接受传入参数为id的值，覆盖该注解注释的字段。

　　@RequestParam(name="name",defaultValue = "李四") String u_name   如果传入字段”name”为空，默认u_name的值为”李四”。若传入”name”不为空，默认u_name值为传入值。
/** * 自定义方法参数名-当请求参数名与方法参数名不一致时

* @param u_name 用户名

* @param u_pwd 密码

* @return*/@RequestMapping(value = "/addByDifName", method = RequestMethod.GET, produces = {"application/json;charset=UTF-8"})

@ResponseBodypublicString addUserByDifName(@RequestParam("name") String u_name, @RequestParam("pwd")String u_pwd){

    logger.debug("name:" + u_name + ",pwd:" + u_pwd);

    return"name:" + u_name + ",pwd:" + u_pwd;

}
</code></pre>
<p>访问：<code> http://localhost:8080/sty/param/addUserByDifName.action?name=张三&amp;pwd=123456</code>。</p>

<p>(4) HttpServletRequest方式</p>
<pre><code>/** * 通过HttpServletRequest接收

* @param request

* @return*/@RequestMapping(value = "/addByHttpServletRequest", method = RequestMethod.GET, produces = {"application/json;charset=UTF-8"})

@ResponseBodypublic String addUserByHttpServletRequest(HttpServletRequest request){

    String name = request.getParameter("name");

    String pwd = request.getParameter("pwd");

    logger.debug("name:" + name + ",pwd:" + pwd);

    return"name:" + name + ",pwd:" + pwd;

} 
</code></pre>
<p>访问：<code>http://localhost:8080/sty/param/addByHttpServletRequest.action?name=张三&amp;pwd=123456</code></p>

<ul>
  <li>注意：其他方式的获取，基础都是request请求。自动封装也是从request中获取后进行的封装。</li>
</ul>

<p>##3.3 Spring MVC的转发和重定向
###3.3.1 转发
使用request也行。</p>
<pre><code>@RequestMapping("/helloForward")
publicString helloForward(@RequestParam(value="name", required=false, defaultValue="World2017") String name, Model model) {
        model.addAttribute("name", name);
        return"hello";
    }
</code></pre>
<p>###3.3.2 重定向
（1）RedirectAttributes类</p>
<pre><code>/** * 使用RedirectAttributes类

    * @param name

    * @param redirectAttributes

    * @return*/    @RequestMapping("/helloRedirect")

    publicString helloRedirect(@RequestParam(value="name", required=false ) String name, RedirectAttributes redirectAttributes) {

        redirectAttributes.addFlashAttribute("name", name);

        return"redirect:/hello";

    }
</code></pre>
<p>（2）借助Session传值</p>
<pre><code>    /**    * 常规做法，重定向之前把参数放进Session中，在重定向之后的controller中把参数从Session中取出并放进ModelAndView

    * @param name

    * @param request

    * @return*/   

    @RequestMapping("/helloRedirect2")

    publicString helloRedirect2(@RequestParam(value="name", required=false ) String name, HttpServletRequest request) {

        request.getSession().setAttribute("name", name);

        return"redirect:/hello2";

    }

@RequestMapping("/hello2")

    public String hello2(Model model,HttpServletRequest request) {

        HttpSession session = request.getSession();

        model.addAttribute("name",session.getAttribute("name"));

        return"hello";     

    }
</code></pre>
<p>##3.4 Input标签上传多个图片到服务器
（1）前端页面</p>
<pre><code>&lt;form action="getData" style="font-size: 14px;" method="post"  ENCTYPE="multipart/form-data"&gt;
    &lt;td&gt;&lt;input type="file" name="file" multiple="multiple"&gt;&lt;/td&gt;
&lt;/form&gt;
</code></pre>
<p>（2）服务器端</p>
<pre><code>public void getData(@RequestParam(value = "file", required = false) List&lt;MultipartFile&gt; file,
HttpServletRequest req) {
  try {
    for (MultipartFile f : file) {
        //....
    }
  }
}
</code></pre>
<p>##3.5 The field file exceeds its maximum permitted size of 1048576 bytes
Spring Boot做文件上传时出现了The field file exceeds its maximum permitted size of 1048576 bytes.错误，显示文件的大小超出了允许的范围。文档说明表示，每个文件的配置最大为1Mb，单次请求的文件的总数不能大于10Mb。要更改这个默认值需要在配置文件（如application.properties）中加入两个配置。</p>

<p>Spring Boot1.4版本后配置更改为:</p>
<pre><code>spring.http.multipart.maxFileSize = 10Mb 
spring.http.multipart.maxRequestSize=100Mb 
</code></pre>
<p>Spring Boot2.0之后的版本配置修改为:</p>
<pre><code>spring.servlet.multipart.max-file-size = 10MB
spring.servlet.multipart.max-request-size=100MB
</code></pre>
<p>##3.6 服务器发送可下载文件到浏览器</p>
<pre><code>@RequestMapping(value = "downloadZip", method = RequestMethod.GET)
    public void downloadZip(HttpServletResponse response,String id) throws Exception {
        String fileName=workCardPhotoFileService.downloadZipFile(id);
        if (StringUtils.isNotEmpty(fileName)){
            response.setContentType("application/application/vnd.ms-excel");
            response.setHeader("Content-disposition",
                    "attachment;filename=" + fileName);
            download(response.getOutputStream(),fileName);
        }
    }

public void download(OutputStream os, String fileName) throws IOException {
        //获取服务器文件
        File file = new File("/Users/Desktop/download/workcardphoto/"+fileName);
        InputStream ins = new FileInputStream(file);
        byte[] b = new byte[1024];
        int len;
        while((len = ins.read(b)) &gt; 0){
            os.write(b,0,len);
        }
        os.flush();
        os.close();
        ins.close();
    }
</code></pre>
<p>##3.7 @requestBody注解作用
通过@requestBody可以将请求体中的JSON字符串绑定到相应的bean上，当然，也可以将其分别绑定到对应的字符串上。</p>
<pre><code>　$.ajax({
　　　　　　　　url:"/login",
　　　　　　　　type:"POST",
　　　　　　　　data:'{"userName":"admin","pwd","admin123"}',
　　　　　　　　content-type:"application/json charset=utf-8",
　　　　　　　　success:function(data){
　　　　　　　　　　alert("request success ! ");
　　　　　　　　}
　　　　});

@requestMapping("/login")
public void login(@requestBody User){
　　System.out.println(userName+" ："+pwd);
}
</code></pre>
<p>##3.8 Springboot访问HTML页面
此部分在测试过程中，一旦引入spring-boot-starter-thymeleaf，整个项目的pom文件就报错，具体原因排查中，了解的小伙伴也可以一起讨论。</p>

<p>在具体实践中，大都使用freemarker进行页面设计，且前述提到过，可以使用freemarker进行Html页面的访问。</p>

<p>###3.8.1 Springboot下maven依赖</p>
<pre><code>&lt;dependency&gt;
     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
     &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;
 &lt;/dependency&gt;

&lt;!--避坑包--&gt;

      &lt;dependency&gt;

          &lt;groupId&gt;net.sourceforge.nekohtml&lt;/groupId&gt;

          &lt;artifactId&gt;nekohtml&lt;/artifactId&gt;

          &lt;version&gt;1.9.22&lt;/version&gt;

      &lt;/dependency&gt;
</code></pre>
<p>###3.8.2 yml配置</p>
<pre><code>spring:
     thymeleaf:
         prefix: classpath:/templates/
</code></pre>
<p>在LEGACYHTML5下，application.properties配置文件如下。因为在默认配置下，thymeleaf对.html的内容要求很严格，比如&lt;meta charset=”UTF-8″ /&gt;，如果少最后的标签封闭符号/，就会报错而转到错误页。也比如你在使用Vue.js这样的库，然后有&lt;div v-cloak&gt;&lt;/div&gt;这样的html代码，也会被thymeleaf认为不符合要求而抛出错误。因此，建议增加下面这段：</p>
<pre><code>    spring.thymeleaf.mode = LEGACYHTML5
</code></pre>
<p>spring.thymeleaf.mode的默认值是HTML5，其实是一个很严格的检查，改为LEGACYHTML5可以得到一个可能更友好亲切的格式要求。</p>
<pre><code>#&lt;!-- 关闭thymeleaf缓存 开发时使用 否则没有实时画面--&gt;
spring.thymeleaf.cache=false
## 检查模板是否存在，然后再呈现
spring.thymeleaf.check-template-location=true
#Content-Type值
spring.thymeleaf.content-type=text/html
#启用MVC Thymeleaf视图分辨率
spring.thymeleaf.enabled=true
## 应该从解决方案中排除的视图名称的逗号分隔列表
##spring.thymeleaf.excluded-view-names=
#模板编码
spring.thymeleaf.mode=LEGACYHTML5
# 在构建URL时预先查看名称的前缀
spring.thymeleaf.prefix=classpath:/templates/
# 构建URL时附加查看名称的后缀.
spring.thymeleaf.suffix=.html
# 链中模板解析器的顺序
#spring.thymeleaf.template-resolver-order= o
# 可以解析的视图名称的逗号分隔列表
#spring.thymeleaf.view-names=
#thymeleaf end
</code></pre>

</div>
<div class="v">
  <i class="fas fa-spinner fa-pulse"></i>
</div>
<script
  src='https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js'
  defer='defer'
  onload='
    new Valine({
      "el": document.getElementsByClassName("v")[0],
      "appId": "Si5PlwXoOsczw9YMDIGjYPSK-gzGzoHsz",
      "appKey": "stI6rxYdK6PXYnmGVxx1JHML",
      "placeholder": "在这里评论吧！填写邮箱可以获得 Gravatar 头像和回复通知哦",
      "requiredFields": ["nick","mail"],
      "visitor": true,
      "recordIP": true
    })'
></script>

</div>
  </div>
  
  <label for="sidebar-checkbox" class="sidebar-toggle"></label>
  
</body>

</html>